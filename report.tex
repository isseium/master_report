\documentclass{jsarticle}

\usepackage{otf}
\usepackage[dvipdfmx]{graphicx}     % png 形式を利用するために付加

\begin{document}

\tableofcontents
\newpage
\listoftables
\newpage
\listoffigures
\newpage

\section{はじめに}

近年，我が国においては，若者の旅行離れが進んでおり，地域経済・文化の発展への悪影響が懸念されている．そこで我々は，旅行を促進する観光推薦システムを通じて若者と地域を結びつける仕組みの形成し，地域活性化へ寄与することを目指した．

本章では，本研究で対象とする観光の歴史と現状についてまとめ，今後の観光の発展に向けた課題について述べる．

\newpage

\subsection{観光促進の意義}

2013年，日本政府の閣僚によって構成される観光立国推進閣僚会議が立ち上げられた．本会議で決定された「観光立国実現に向けたアクション・プログラム2014\cite{action_program_2014}では観光について次のように述べている．

\begin{quote}
観光は、急速な成長を遂げるアジアをはじめとする世界の需要を取り込むことによって、日本の力強い経済を取り戻すための柱である。加えて、人口減少・少子高齢化が進展する中、国内外からの交流人口の拡大によって地域の活力を維持し、社会を発展させるとともに、諸外国との双方向の交流により、国際相互理解を深め、国際社会での日本の地位を確固たるものとするためにも、極めて重要な分野である。
\end{quote}

また，東日本大震災からの復興を新しい国づくりの契機にしたいとして2011年に発足した有識者らによる政策発信組織である日本創世会議においても，「地方元気戦略」のひとつに観光をキーワードとして挙げており，地方へ人を呼び込む魅力づくりの施策として期待されている．

さらに，経済面から観光を調査すると，世界全体GDPに占める観光関連業界のGDPは 9.1\% であり，金融業に次いで世界第2位の業種であることがわかる．
国内においても，その経済効果は大きい．我が国の観光統計の概要を図\ref{tourism_kibo}に示す．

\begin{figure}[h!]
\begin{center}
\includegraphics[width=8.0cm]{./image/tourism_kibo.png}
\caption{日本における観光統計の概要\cite{tourism_stat}}
\label{tourism_kibo}
\end{center}
\end{figure}

また，観光ビジネス研究会所属の中小企業診断士らによると，観光産業の発展を目指す理由を次のように挙げている\cite{tourism_future}．

\begin{enumerate}
\item 少子高齢化社会への対応: 国内需要の縮小が想定されるなか，我が国の伝統・文化・産業などのソフトパワーによる経済成長ができる可能性を持っている．
\item 地域経済の活性化: 地域独自の文化を含む観光資源の活用することで，国内外の旅行者との交流人口を増加させ，魅力的な地域を形成できる可能性を持っている．
\item 為替変動への対応: 観光産業は，原材料を必要としないため，安定的な経済社会の実現に向けた可能性を持っている．
\item 雇用の拡大: 若年層から熟年層まで幅広く雇用を生む可能性を持っている．
\end{enumerate}


以上のように，観光は国家戦略，経済戦略として重要な位置づけとされており，国内のみならず世界の地域文化・経済を支える分野である．したがって，観光促進に関する研究をする意義は大きい．

\subsection{観光分野の課題}

観光分野の発展はその波及効果も含めて大きな期待がされている．一方で，発展に向けた課題は数多くある．
観光行政を担当している観光庁が毎年発表している観光白書では，2010年から若者旅行の促進を課題のひとつとして毎年挙げている\cite{kanko_hakusho_2009}\cite{kanko_hakusho_2010}\cite{kanko_hakusho_2011}\cite{kanko_hakusho_2012}\cite{kanko_hakusho_2013}\cite{kanko_hakusho_2014}．観光白書では，若者の旅行離れが将来的な観光発展に大きな影響を与えることが危惧されている．この課題の解決に向けた有識者会議として2011年に若者旅行振興研究会が発足した．
本研究会では，発足にあたり次の課題を挙げている\cite{wakamono_shinko}．

\begin{enumerate}
\item 国内観光市場の低迷: 2005年以降，横ばいで推移しており，国内観光市場が発展していない
\item 日本人旅行の回数・宿泊数が減少傾向: 実質的に国内観光市場を支えている日本人旅行が低調．訪日外国人旅行は今後期待されているが，まだ市場は小さい．
\item 若者の旅行回数の減少: 20代・30代の旅行回数の落ち込みが顕著．他世代と比較して学生旅行の回数も大きく減少している．
\item 将来的に家族旅行の回数減少の懸念: 旅行回数の少ない若者がライフステージが変わったときに旅行行動をとらない可能性が高い．
\end{enumerate}

\subsection{推薦システムの発展}
\label{evolution_recommendation_system}

一方，情報工学分野では推薦システムの発展が近年著しい．推薦システムを簡潔に表現した定義は次のとおりである\cite{define_of_recommendation_system}．

\begin{quote}
どれに価値があるかを特定するのを助ける道具
\end{quote}

また，推薦システムが必要となった背景は2つある\cite{kamishima_recommendation}．

\begin{enumerate}
\item 大量の情報が発信されるようになった: 情報技術の進展により，容易かつ低コストで情報を発信できるようになった．
\item 誰もが大量の情報を取得できるようになった: 情報を参照できる状態だが，それを識別できない状況が生じた．（情報過多\cite{information_overload}）
\end{enumerate}

これらの背景もあり，推薦システムの研究は進み，産業界においても利活用によって業績を伸ばす事例が出ており，最近では，Webを通じた各種サービスの機能で活用されている．
推薦システムを活用した情報サービスの例を以下に挙げる．

\begin{enumerate}
\item Amazon: 書籍の情報推薦を行う．購入を検討している書籍に関連する書籍をおすすめとして提示したり，これまで購入した書籍に関連する書籍を推薦する．
\item Gunosy: ニュース記事の情報推薦を行う．利用者個人の興味のある分野を推定し，その内容に応じてニュースを推薦する．
\item オンライン広告: 購買行動を促進する効果的な広告を表示する．利用者のWebサイト利用状況や過去に興味を持った広告などの情報を活用して広告を推薦する．
\end{enumerate}

以上のように，情報工学分野では推薦システムの研究が進み，産業界においても利用され，情報過多の時代とされる現代において人々の生活を助ける道具として活躍している．

\subsection{本研究の目的}

これまでの説明によって，観光は我が国のみならず世界全体として主要な産業のひとつであり，我が国の成長にとっても重要な分野であることが明らかになった．観光庁は，観光分野の発展に向けて，若者旅行の促進を政策のひとつとあげており，若者旅行振興研究会を発足させた．本研究会では， 若者旅行振興のための課題を示している．

一方，情報工学分野においては新しい情報発信の仕組みとして推薦システムの実践利用が進んでいる．我々は，観光領域に情報推薦の仕組みを適用し，消費者の行動データをもとにしたパーソナライズした地域情報発信を行い，行動データの観光推薦への活用可能性を検証することを目的として研究を進めることとした．本研究によって観光分野の発展および地域活性化に寄与することを狙う．

\subsection{本論文の構成}

本論文は，6章から構成される．
第1章では，本研究の概観として，観光の現状と推薦システムの現状を示した．
第2章では，本研究で扱う観光領域について調査し，本研究における観光の位置づけを述べる．
第3章では，観光領域での推薦システムの活用事例について調査し，本研究で解決を目指す具体的な課題を明らかにする．
第4章では，課題解決を図った観光推薦システムの提案・設計を示す．
第5章では，開発したプロトタイプシステムの運用結果とその評価を質的観点と量的観点からまとめ，考察する．
第6章では，本研究のまとめと今後の課題について述べる．

\subsection{本章のまとめ}

本章では，観光分野の研究を実施する意義を明らかにし，本研究の目的を，行動データの観光推薦への活用可能性の検証であることを示した．
次章以降では，既存研究，関連事例などを細かに調査し，その解決を図る．

\newpage

\section{観光の概観}

本章では，本研究で扱う観光領域について調査し，本研究における観光の位置づけを述べることを目的とする．本章は，nの節から構成される．2.1節では，観光の歴史を語源から調査した内容を述べる．2.2節では，比較的新しい学問である観光研究の歴史をひもとく．2.3節では，歴史的背景，学問的背景から観光と関連用語の定義について述べる．2.5節では，本章のまとめとして観光の概観をもとに本研究で論ずる観光の定義を示す．

\newpage

\subsection{観光の歴史}

観光という言葉は，中国の「益経」という書物のなかの「国の光を観る．用て王の賓たるに利し」という一節によるとされている．\cite{kanko_define}
ここでいう「国の光」とは，国王の人徳と善政によって国が反映し，その国を訪れる人々にはその国が光に輝いて見えることをいう．すなわち，観光とは，その「国の光」を観ることである．

\subsection{観光研究の歴史}

一般に，観光は余暇の時間に実施する人間の行為であり，観光を実施するには金銭的な支出が必要であるとされている．我が国においての観光は，経済的に豊かになった高度経済成長期から盛んに注目され，これまで一部の富裕層にのみが実施できた観光が多くの国民にとって身近なものになった．
それに伴い，観光の学問的な取り組みのニーズが高まり，我が国では1960年に日本観光学会が設立され，観光研究が始まった．日本国内の主な学会を 表\ref{japanese_society} に示す．


\begin{table}[!h]
\small
\caption{日本国内の主な学会\cite{japanese_society_list}}
\begin{center}
\begin{tabular}{lll}
\label{japanese_society}
学会名 & 設立年 & 活動目的 \\ \hline
日本観光学会                            & 1960年 & 観光及び観光事業に関する学術の進歩・普及 \\
日本ホスピタリティ・マネジメント学会    & 1992年 & ホスピタリティの考え方を基軸としたマネジメント研究 \\
日本国際観光学会                        & 1993年 & 国際観光の学術研究の推進 \\
余暇ツーリズム学会                      & 2001年 & 余暇領域の研究 \\
総合観光学会                            & 2001年 & 専門分野を超えた総合観光学の確立と観光地域の持続的な発展 \\
観光まちづくり学会                      & 2001年 & 観光をまちづくりの視点で研究 \\
日本観光ホスピタリティ教育学会          & 2002年 & 観光とホスピタリティに関わる教育の在り方を探究する \\
観光情報学会                            & 2003年 & 観光学と情報科学技術に関する学術的視点と観光産業の融合 \\
長崎国際大学 国際観光学会               & 2005年 & 長崎国際大学での研究成果を公開し広く情報交換を得ること \\
日豪ツーリズム学会                      & 2007年 & 日豪観光分野における交流の促進に関して調査・研究 \\
国際観光医療学会                        & 2010年 & 観光と医療に携わる領域の研究ならびに交流 \\
日中国際ツーリズム学会                  & 2010年 & 中日ツーリズムの国際協力に関する研究 \\
コンテンツツーリズム学会                & 2011年 & コンテンツを活用した観光振興及び地域活性化の研究と実践 \\
観光学術学会                            & 2012年 & 観光学の学術的発展と普及 \\
\end{tabular}
\end{center}
\end{table}


\subsection{観光の定義}

観光学は，いまだ発展途上の学問であり，現時点で「観光」の普遍的な定義を示すのは難しいとされている\cite{kanko_define}．
観光の定義には，代表的なものがいくつかあるが，研究の必要により研究者によっては独自の定義を用いる場合も多い．

ここでは代表的な定義を示したうえで，本研究での定義を述べる．


\subsubsection{経済学としての観光定義}

観光は，経済学者が「見えざる輸出」(invisible export) として重要性に注目したことによって始まったとされている．最初の研究課題は，その経済効果をどのように測定するかである．オギルヴィエは，観光の本質が「一時的滞在地において他所で取得した収入を消費すること」と定義した．一方，グリュックスマンは，「ある土地における一時的滞在者とその土地の住民との間の諸般の関係」と考えた．

\subsubsection{一般的な定義としての観光}

特定の研究目的を念頭におかず，一般的な定義として代表的に利用されたのは，井上による「人が日常生活圏を離れて，再び戻る予定で，レクリエーションを求めて移動すること」である．

\subsubsection{我が国における公的な定義}

「余暇時間の中で，日常生活圏を離れて行う様々な活動であって，触れあい，学び，遊ぶということを目的とするもの」である\cite{toshin_1995}．この概念をまとめたものを図\ref{define_kanko_by_unnyu} に示す．近年では，この定義を用いて観光を論ずる場合が多い．

\subsubsection{国際的な定義}

世界観光機構（WTO: World Tourism Organization) では，「訪問の主要な目的が，訪問国内で報酬を得るための活動を行うこと以外の者で，1泊以上12ヶ月を超えない期間，居住国以外の国で通常の生活環境を離れて旅行する人」としている．

\subsection{観光関連用語の定義}

これまで「観光」は，普遍的な定義がなく，観光を扱う者によってその定義が異なることを示した．ここでは同様に，観光に関連する用語の定義を概観として示す．

\subsubsection{観光対象}

観光という行動には，なんらかの対象がある．それを観光対象と呼ぶ\cite{yokomizo_1998}．
観光対象は2つの要素で構成されている．1つ目は，観光資源である．2つ目は，観光施設IIである．その言葉の定義を次小節にて示す．

\subsubsection{観光資源}

観光資源という言葉には，広義の定義と狭義の定義が存在する．
まず狭義の観光資源とは，「今後とも価値が減じない資源」であり，長い時間の経過を経て，価値がでた資源である．これには，人間が創造することのできない自然観光資源と先人が長い時間を経て価値を創造した人文観光資源I，およびこれら2種を融合した複合観光資源の3つで構成されている．

一方，広義の観光資源は，狭義の観光資源のほかに，将来の価値が保証されるとは限らない資源のうち，人工観光資源（観光施設I）もしくは無形社会資源を含んだもの指す．例を挙げると，前者は年間数百万人が来場するテーマパークなど，後者は文化的側面の強い風俗・衣食住・芸術・言語などである．

観光学上の観光資源は，いわゆる「見る・学ぶ」に相当する．

\subsubsection{観光施設II}

観光施設IIは，宿泊施設やレクリエーション施設である．この区分にある対象は，将来的に長い時間を経て，観光施設Iの区分に移動する可能性がある．
観光学上の観光施設IIは，いわゆる「泊まる・遊ぶ」に相当する．


\subsubsection{公的な用語の定義}

これまでは観光学の側面から体系だてられた区分を紹介した．ここでは，政府・官公庁が利用する公的な定義をまとめて紹介する．

\begin{enumerate}
\item 観光      : 余暇の時間の中で，日常生活圏を離れて行う様々な活動であって，触れあい，学び，遊ぶということを目的とするもの\cite{toshin_1995}.
\item 観光資源  : 史跡，名勝，天然記念物等の文化財，歴史的風土，優れた自然の風景地，良好な景観，温泉その他文化，産業等に関するもの\cite{tourism_law_2007}.
\item 観光地    : 観光資源の集積及び地域的なまとまり\cite{tourism_kensetsu_1974}.
\item 観光地域  : 観光地の集積，一日周遊圏\cite{tourism_kensetsu_1974}.
\end{enumerate}

\subsubsection{本研究で用いる用語の定義}

これまで観光と観光に関わる用語を調査を行った．しかし，その言葉の定義は確立されたものではない．しかし，研究を進めるにあたり，用語を定義する必要がある．そこで我々は，公的な定義を中心に一般的な定義を決定した．また，情報工学上での観光情報の扱いに関しては明確な定義に沿うデータ取り扱いは難しい．そこで，一般的な定義を包含する広義の定義を用いて論じていくこととした．これらをまとめたものを表\ref{define_of_tourism}に示す．

\begin{table}[!h]
\small
\caption{本研究における用語の定義}
\begin{center}
\begin{tabular}{lp{30zw}p{15zw}}
\label{define_of_tourism}
用語 & 一般的な定義 & 本研究での定義 \\ \hline
観光        & 余暇の時間の中で，日常生活圏を離れて行う様々な活動であって，触れあい，学び，遊ぶということを目的とするもの        & 移動を伴う様々な活動 \\
観光資源    & 史跡，名勝，天然記念物等の文化財，歴史的風土，優れた自然の風景地，良好な景観，温泉その他文化，産業等に関するもの  & 移動を伴う様々な活動の目的地もしくは経由地 \\
観光地      & 観光資源の集積及び地域的なまとまり    & 地域的なまとまり（市区町村） \\
観光地域    & 観光地の集積．一日周遊圏              & 観光地の集積（都道府県） \\
観光推薦    & --                                    & なんらかの情報に基づいて，観光資源，観光地，観光地域などを推薦し，旅行者に価値のある情報を届けること
\end{tabular}
\end{center}
\end{table}

\section{既存研究・関連事例}

本章では，推薦システムの現状と観光推薦システムの既存研究および関連事例についてまとめ，現在の観光推薦研究がどこまで進んでいるかをを述べる．その後，本研究の観光推薦研究における立ち位置を示し，本研究によって解決を目指す課題について明らかにする．

\subsection{推薦システムの概要}

\label{evolution_recommendation_system} で，推薦システムの発展について簡単に紹介した．ここでは，これまで研究が十分に発達した事柄について詳しく紹介し，次節以降の既存の観光推薦システムの事例につなげる．

\subsubsection{推薦の度合い}

推薦システムは，なんらかのアルゴリズムでアイテム（商品などの推薦される対象）を推薦する．この推薦には，個人化の度合いが3つあるとされている\cite{define_of_recommendation_system}\cite{recommendation_type_of_personalize}．

\begin{description}
\item[非個人化推薦] すべての利用者について同じ推薦を行う．いわゆる人気ランキングや新着ランキングなどである．単純な集計関数（合計，平均など）を用いて推薦アイテムを決定するため，実装が容易なことが特徴である．
\item[一時個人化推薦] 利用者の利用の単位（セッション）で，同じ入力や振る舞いをした利用者に同じ推薦を行う．例えば，あるアイテムに関する評価や詳細情報を付加することもこの区分の一種である．別例としては，検索の絞り込みや占い診断のように一定の条件化において同じ推薦を行うものはこの一例になると考えられる．
\item[永続的個人化推薦] 利用者の個人情報や過去の行動情報に応じて，異なる推薦をするものである．例えば，利用者による過去に購入したあるアイテムに関する評価情報に基づいて，関心があるであろう別のアイテムを推薦することである．
\end{description}

本論文では，特に断りのない限り永続的個人化推薦を「推薦」という言葉として取り扱うことにする．

\subsubsection{推薦アルゴリズムの分類}

推薦を行うには，システムが利用者について何らかの情報（以下，ユーザプロファイルという）を知っている必要がある．
ここでは，ユーザプロファイルを用いて推薦をするためのアルゴリズムとして近年よく利用される代表的な4つアプローチを述べる．

\begin{description}
\item[協調型] 協調型推薦のアプローチは，既存のユーザコミュニティの過去の振る舞いや意見を用いて，システムを利用する対象のユーザの好みやおそらく興味を持つであろう情報を予測し，発掘することである．
\item[内容ベース型] 内容ベース型のアプローチは，アイテムの特徴やユーザの好みなど，推薦対象の内容を考慮してアイテムを推薦する手法である．
\item[知識ベース型] ユーザの要求とアイテムの類似性，もしくは明示的な推薦ルールに基づいて推薦する手法である．
\item[ハイブリッド型] これまで説明した3つのアプローチを組み合わせて利用する手法である．
\end{description}

\subsubsection{推薦システムの評価}

推薦システムの研究においては，推薦の質を向上させることは重要である．質の向上を図るには質を比較する指標が必要である．
ここでは，推薦システムの評価に用いられる主要な指標を述べる．

\begin{description}
\item[平均絶対誤差] TODO
\item[適合率] TODO
\item[再現率] TODO
\item[f値] TODO
\end{description}

\subsection{観光推薦システムの必要性と関連研究事例}

前節では，推薦システムの概要を示した．ここでは，観光領域における推薦システムの研究および関連事例をそれぞれの研究の課題ともに明らかにする．

\subsubsection{協調フィルタリングとコンテンツ分析を利用した観光地推薦手法の提案}

樽井らの研究\cite{tarui}では，協調フィルタリングの利点とコンテンツ分析法の利点を組み合わせた観光地推薦手法を提案している．
観光推薦のアプローチとしては，まず次の3つのベクトルを算出する．

\begin{description}
\item[観光地特徴ベクトル] 観光地の特徴を最もよく表している観光特性を要素に持つベクトル
\item[利用者履歴ベクトル] 利用者の旅行履歴を要素に持つベクトル
\item[利用者特徴ベクトル] 利用者が旅行先の選定に重視してきた観光特性を要素に持つベクトル
\end{description}

次に，これらのベクトルを入力値とした協調フィルタリングを実施し，観光地（本論文の定義でいう「観光資源」）を推薦する．
著者はこの研究の課題として，「観光地推薦アルゴリズムの妥当性の検証と利用者テストの実施」を挙げている．
また，利用者履歴ベクトルの入力は，これまで訪れたことのある観光地をすべて入力する必要があり実用的ではないと考える．

\subsubsection{旅行プラン作成支援ツールCT-Planner}

倉田らの研究\cite{ctplanner}\cite{ctplanner2}\cite{ctplanner3}\cite{ctplanner3b}\cite{ctplanner4}\cite{ctplanner5} では，Web上で対話的に旅行プランの作成ができるツール「CT-Planner\cite{ctplanner_web}」を開発している．
本システムは，利用者の要望をレーダーチャートなどで入力し，対話的に旅行プラン（観光ルート; 観光資源の順列）を推薦するものである．

本システムの評価は，ユーザに対してのアンケート・インタビューによるもの主であるが，これまでのユーザの観光実績に基づく推薦精度の視点では評価をしていない．また，本研究の推薦対象は観光ルートであり，すでに訪れる観光地が決まっているユーザ向けのサービスとなっている．

\subsection{本研究の課題}
\label{problem}

前節では，これまでの観光推薦システムの研究がどこまで進められているかについて概観した．
現在の観光推薦システムは下記の課題があることがわかった．

\begin{description}
\item[観光行動に関するデータセットが見当たらない]
       情報推薦領域では多くの研究が行われているが，観光に関するデータセットは存在せず，観光推薦の研究を進めるうえで障害となっている．
\item[観光行動の入力に手間がかかる]
       これまでの観光行動を利用者の特性として観光推薦に利用するアプローチは見られる．しかし，入力には手間がかかることが想定される．
\item[観光推薦領域において実データを利用した評価を行っている研究は見当たらない]
       推薦システムにおいて利用される評価アプローチとして，正解データの一部をマスクしたうえで該当データを推薦システムがどれだけ推薦できたかを評価するものがある．観光推薦システムの領域ではこの方法を利用して推薦精度を評価した事例が見当たらない．
\end{description}

本研究では，以上の3つの課題点を解決する提案を次章以降で述べていく．

\section{提案}

前章では，観光領域における推薦システムの研究および関連事例をそれぞれの研究の課題ともに明らかにし，本研究で解決を図る課題について明らかにした．

本章は，n節で構成される．x節では，課題を解決するために必要なシステム要件を定義する．x節では，要件を満たすために活用するチェックインサービスと汎用的な機械学習ライブラリ「Apache Mahout」について概観を説明する．x節では，システム設計として，概要図，システム構成図，データベース設計，API設計，バッチ設計および動作環境を提示する．x節では，開発したシステムの画面例を機能とともに紹介する．

\subsection{システム要件}

小節\ref{problem}で明らかになった課題の解決を満たすシステムとして，2つのシステム要件を掲げた．

\begin{enumerate}
\item 観光行動自動取得要件: 利用者に手間をかけずに過去の観光行動を取得できること
\item 観光推薦・評価要件: 実データを利用した推薦を実施し精度を評価すること
\end{enumerate}

なお，上記の要件を満たす推薦システムを開発することによって，今後の観光推薦研究のためのデータ収集・評価サイクルが副次的につくられる．

\subsection{利用する外部サービスとライブラリ}

掲げられた要件を満たすシステムを提案するにあたり，利用するサービスおよびライブラリについて説明する．

\subsubsection{チェックインサービス}

チェックインサービスとは，ソーシャルネットワーキングサービス（以下，SNS）の一種である．SNSと同様にユーザは利用登録を行い，サービス内に友人ネットワーク関係を構築し，自身に関する情報を発信することができる．特にチェックインサービスにおいては，自分がいる場所もしくは自分がいた場所を友人に対して発信する（チェックイン）ことで友人とコミュニケーションするサービスである．

代表的なサービスとしては，Foursquare（本研究中に swarm という名称に変更）およびFacebookがある．それぞれの特徴を表\ref{features_of_checkin_service}に示す．

\begin{table}[!h]
\small
\caption{主要なチェックインサービスと特徴}
\begin{center}
\begin{tabular}{lll}
\label{features_of_checkin_service}
特徴＼サービス名            & Foursquare                    & Facebook \\ \hline
利用者数（世界）            & 4500万人                      & 13億人 \\
蓄積されている主なデータ    & 誰が，いつ，どこに行ったか    & 利用者プロフィール，誰が，いつ，どこに行ったか \\
第三者利用の仕組み          & あり                          & あり \\
時価総額                    & 約80億円（非上場）            & 約19兆円 \\
\end{tabular}
\end{center}
\end{table}

どのチェックインサービスも類似した機能を有しており，利用者数も多く日常的にサービスを利用している人も少なくない．
加えて，第三者利用の仕組みがある．第三者利用の仕組みとは，利用者の個別の許可を得られれば，チェックインサービスの運営会社以外の第三者に対して，これまで蓄積した個人のチェックインデータを連携することができる仕組みである．

これらの特徴を踏まえると，要件を満たすシステムを開発するにあたり，チェックインサービスのデータを活用することが相応しいと考えた．

\subsubsection{Apache Mahout}

Apache Mahout は，Apache Software Foundation が開発を進めるオープンソースの機械学習ライブラリである．大きく分けて，「レコメンデーション」「クラスタリング」「分類」の3つの機械学習が実装されている．Apache Software Foundation のトッププロジェクトのひとつということもあり現在も開発が活発で，同組織が開発する大規模データ処理基盤 Apache Hadoop などとの連携も行われている．

これらの特徴を踏まえると，要件を満たすシステムを開発するにあたり，このライブラリを利用することによって容易に推薦システムの仕組みを整えられると考えた．

なお，本論文では，観光推薦の精度向上自体は主題ではないため，妥当な推薦アルゴリズムの選定は行わず，チェックインデータを利用して容易に推薦ができる協調フィルタリングを利用することとした．

\subsection{システム設計}

これまで紹介したチェックインサービスおよび Apache Mahout を用いて観光推薦システムのプロトタイプを設計した．
本システムは2つのモジュールで構成されている．1つは，特徴収集モジュールである．このモジュールでは，利用者からチェックインサービスの第三者利用の承認を得たうえで，チェックインサービス上にあるデータを収集し，システムのデータベースに格納する．もう一方のモジュールは，推薦モジュールである．本モジュールでは，蓄積されたチェックインデータを活用して観光推薦を実施する．

推薦アルゴリズムは，次に3つのパターンを入力値として協調フィルタリング（アイテムベース，コサイン類似度）に基づいて観光推薦を行う．

\begin{description}
\item[観光地域推薦（都道府県推薦）] 利用者のチェックインデータを都道府県の単位に名寄せさせたものを入力値としたもの．
\item[観光地推薦（市区町村推薦）] 利用者のチェックインデータを市区町村の単位に名寄せさせたものを入力値としたもの．
\item[観光資源推薦（スポット推薦）] 利用者のチェックインデータをそのまま入力値としたもの．
\end{description}


それぞれのパターンともに，アイテム（都道府県，市区町村および観光資源のいずれか）とユーザの行列を入力値とする．行列の値は，行ったことがあれば1, 行ったことがなければ0となる．

\subsubsection{システム概要図}

提案システムのシステム概要図を図xに示す．特徴収集モジュールが実施する流れ 1〜3 によって，「観光行動自動取得要件」を満たすことができる．また，流れ 4〜6 によって，「観光推薦・評価要件」を満たすことができる．

TODO: 図をつける

\subsubsection{システム構成図}

提案システムのシステム構成図を図xに示す．より具体的な設計は後述するが，本システムは，一般的なWebアーキテクチャに従って構築されている．

\begin{description}
\item[フロントエンド] 利用者とのインタフェースとなる部分．Webインタフェースとなっており，利用者とHTTP通信によるコンテンツのやりとりを担う．
\item[WebAPI] フロントエンドからの要求に基づいて，データベースを更新したり，データを加工する役割を担う．フロントエンドと疎結合にすることによって，将来的なスマートフォン対応などを考慮した設計とした．
\item[データベース] 本システムに関する永続的な情報を格納する．詳しくは，データベース設計にて述べる．
\item[特徴収集デーモン] 常時起動しており，利用者が新たに登録されたときに，瞬時に利用者の特徴を収集するデーモンである．
\item[特徴更新バッチ] すでに登録された利用者の特徴を更新するためのバッチである．1日1回深夜に利用者の情報を更新する．
\item[推薦バッチ] 利用者の特徴をもとに推薦を実施するバッチである．推薦結果はデータベースに格納され，APIおよびフロントエンドを経由して利用者に表示される．3種類の推薦パターンを毎時1回実施している．
\end{description}


\subsubsection{データベース設計 - 設計方針}

ここでは，提案システムにおけるデータベース設計について説明する．
本システムは，大量のデータが蓄積されることが想定されるため，データを3つの特性に分類し，それぞれ異なるデータベースマネジメントシステム（以下，DBMSと呼ぶ）を利用することにした．

1つ目は，信頼型データである．この区分に分類されるデータは，一貫性と可用性を必要とするデータであり，高い信頼性が求められる．本システムにおいては，ユーザ情報（ログイン情報など）を想定した．利用するDBMSは，MySQL とした．

2つ目は，高速型データである．この区分に分類されるデータは，高速な応答性が求められるデータである．本システムにおいては，リバースジオコーダーのキャッシュに利用することにした．利用するDBMSは，Redis とした．

3つ目は，柔軟型データである．この区分に分類されるデータは，柔軟なデータ格納が求められるデータであり，いわゆるドキュメント型のデータ構造である．本システムにおいては，大量かつスキーマレスなチェックインデータおよびプロフィールデータを想定した．利用するDBMSは，MongoDB とした．


データベースの特性について，表 x に示す.

TODO: 表を書く

\subsubsection{データベース設計 - テーブル定義}

ここでは，データベースの具体的なテーブル定義について述べる．また表xにER図を示す．ERは関係データベースと親和性の高いモデリング手法であるため，関係データベースを利用しないテーブルについては，便宜上の表現を用いることにした．また一部のテーブル定義が正規化されていない，もしくは低次の正規化であるのは処理性能などを考慮したためである．

TODO: あとでしっかりまとめる

[信頼型]

Users: ユーザに関する情報を扱う

Auths: トークンなどの認証情報を扱います

ShareQueue: Facebookシェアなどの外部投稿処理を非同期のジョブとするために利用します



[高速型]

RGEOCODER: Yahoo!JAPN リバースジオコーダーのキャッシュとして利用します.


[柔軟型]

UserStats: ユーザのソーシャルネットワーキングサービス上での様々な行動ログを格納します


Checkins: ユーザのチェックイン情報を格納します．

Spots: ユーザのスポット情報を格納します．

PrefecturalMaps: ユーザ別の地域マップを管理します．

CheckinsUpdateJobs: チェックイン更新バッチの起動状況を管理します．

Prefectures: 都道府県情報を管理します．

RecommendPrefetures: ユーザ毎の都道府県推薦の結果を蓄積します.

RecommendCities: ユーザ毎の市区町村推薦の結果を蓄積します.

RecommendSpots: ユーザ毎のスポット推薦の結果を蓄積します.

RedirectLogs: 推薦した情報に対するユーザのアクションを記録します

\subsubsection{API設計}

ここでは，提案システムのAPI設計を示す．本APIは，原則としてRESTful アーキテクチャを採用している．
メソッド，エンティティごとにAPIの設計を説明する．


GET system

GET users/:id

POST users

GET my

PUT my

DELETE my

GET maps/prefecture/:id

POST maps/prefecture/image/;id

GET maps/prefecture/image/:id

POST my/checkins/update

GET my/checkins/update/:update\_id

GET my/checkins

GET my/checkins/:checkin\_id

GET spots/:spot\_id

GET recommends/prefectures/scf

GET recommends/cities/scf

GET recommends/spots/scf

GET rank/spot/popular

GET friends\_rank/spot/recent

\subsubsection{バッチ設計}

ここでは，提案システムのバッチについて説明する．バッチとは，決められた時刻もしくは時間間隔で定期的に定まった処理を行うプログラムである．本システムでは，4つのバッチプログラムがある．

TODO: 4つのバッチの説明

\subsection{開発したシステム}

前節で示した設計を満たすシステムを開発した．ここでは，画面ごとにシステムを紹介する．

\subsubsection{ログイン前ホーム画面}

利用者が，本システムにはじめて訪れると「ログイン前ホーム画面」が表示される．この画面では，本システムの目的，機能を利用者に伝えている．画面例を図\ref{screen_home_before_login}に示す．


TODO: 図

\subsubsection{新規登録画面}

利用者がサービスを登録する前に，表示する画面．利用規約やチェックインサービスで取得するデータを明確に示し，情報利用について承諾を得た上で利用してもらうことで，本システムの利用による倫理的な問題が起きないように配慮した．


\subsubsection{Facebook 第三者認証画面}

利用者に対して，本システムに対してデータ連携を許可を求める．許可を得た場合は，利用者のFacebook上のプロフィールおよびチェックインデータを本システムのデータベースに取り込むためにデーモンにキューを発行する．

\subsubsection{ログイン後ホーム画面}

ログインが完了した利用者向けのホーム画面．この画面はダッシュボード型の画面になっており，利用者に向けて様々な情報が提示される．

\begin{description}
\item[観光資源推薦情報] これまで訪れたことのある観光資源に基づいて推薦された観光資源．バッチxで処理された推薦結果を表示する．
\item[観光地域推薦情報] これまで訪れたことのある観光資源に基づいて推薦された観光地域（都道府県）．バッチxで処理された推薦結果を表示する．また観光地域に関係する情報サイトへのリンクも掲載した．
\item[色塗り地図] これまで訪れたことのある都道府県を日本地図上で可視化した．訪れたことのある地域は朱色，訪れたことのない地域は緑色（水玉）で示した．
\item[シェア] 色塗り地図の画像をFacebookにシェアする．本機能によって，利用者間の競争意識を高め，本サービスの利用者促進を図った．
\item[統計情報] 自身のチェックインに関する統計情報を表示する．利用者内での自分の立ち位置がわかるランキング機能も備えた．
\item[友達に人気のスポット] 友達がよく行くスポットを表示する．
\item[友達が最近行ったスポット] 友達が最近行ったスポットを表示する．
\end{description}

\subsubsection{みんなのトリップ}

本サービスの利用者全員のチェックインデータに基づく統計情報を示す画面である．

\begin{description}
\item[最近登録した人リスト] 本サービスに最近登録をした人を表示する
\item[みんなに人気のスポット] 本サービスの利用者全員のチェックイン数が多いスポットを表示する
\end{description}

\subsubsection{友達のトリップ}

利用者の友人の一覧を表示する画面である．本画面から友人のトリップ情報へのリンクをたどることができる．

\subsubsection{ユーザ情報画面}

任意のユーザのチェックイン情報および推薦情報などが表示される画面である．原則として「ログイン後ホーム画面」と同様の情報が表示される．

\section{評価・考察}
\subsection{システム運用の概要}
\subsection{推薦精度の評価}
\subsection{利用者の評価}
\subsection{得られた知見}

\section{おわりに}
\subsection{本研究の結論}
\subsection{今後の課題と展望}

\newpage
\input{bib.tex}


\end{document}
